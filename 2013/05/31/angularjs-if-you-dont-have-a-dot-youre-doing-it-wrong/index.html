<!DOCTYPE html>
<html>
        <head>
    <title>AngularJS: If you don't have a dot, you're doing it wrong!</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="This has bitten me twice in the last 3 days so I&#39;m doing a quick post to remind myself.">
    <meta name="keywords" content="" />
    <script src="/js/jquery.min.js"></script>
    <script src="/js/init.js"></script>

    <link rel="stylesheet" href="/css/main.css">

    <link rel="canonical" href="//2013/05/31/angularjs-if-you-dont-have-a-dot-youre-doing-it-wrong">
    <link rel="alternate" type="application/atom+xml" title="zcourts AKA Courtney Robinson" href="/feed.xml" />
</head>
    <body>
        <!-- Header -->
<div id="header" class="skel-layers-fixed">

    <div class="top">

        <!-- Logo -->
        <div id="logo">
            <span class="image avatar48"><img src="/images/avatar.jpg" alt=""/></span>

            <h1 id="title">zcourts</h1>
            <p>Courtney Robinson</p>
            <p>Software Engineer</p>
            <p>PhD Student</p>
        </div>

        <!-- Nav -->
        <nav id="nav">
            <!--

                Prologue's nav expects links in one of two formats:

                1. Hash link (scrolls to a different section within the page)

                   <li><a href="#foobar" id="foobar-link" class="icon fa-whatever-icon-you-want skel-layers-ignoreHref"><span class="label">Foobar</span></a></li>

                2. Standard link (sends the user to another page/site)

                   <li><a href="http://foobar.tld" id="foobar-link" class="icon fa-whatever-icon-you-want"><span class="label">Foobar</span></a></li>

            -->
            <ul>
                <li><a href="/#top" id="top-link" class="skel-layers-ignoreHref"><span class="icon fa-home">Home</span></a></li>
                <li><a href="/#portfolio" id="portfolio-link" class="skel-layers-ignoreHref"><span class="icon fa-th">Projects</span></a></li>
                <li><a href="/posts" id="blog-link" class="skel-layers-ignoreHref"><span class=" glyphicon glyphicon-comment">Blog posts</span></a></li>
                <li><a href="/categories.html" id="cat-link" class="skel-layers-ignoreHref"><span class=" glyphicon glyphicon-tags">Categories</span></a></li>
                <li><a href="/about-courtney-robinson" id="about-link" class="skel-layers-ignoreHref"><span class="icon fa-user">About Me</span></a></li>
                <li><a href="/#contact" id="contact-link" class="skel-layers-ignoreHref"><span class="icon fa-envelope">Contact</span></a></li>
            </ul>
        </nav>

    </div>

    <div class="bottom">

        <!-- Social Icons -->
        <ul class="icons">
            <li><a href="https://twitter.com/zcourts" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
            <li><a href="https://www.facebook.com/zcourts" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
            <li><a href="https://github.com/zcourts" class="icon fa-github"><span class="label">Github</span></a></li>
            <li><a href="mailto:site@crlog.info" class="icon fa-envelope"><span class="label">Email</span></a></li>
        </ul>

    </div>

</div>
        <!-- Main -->
        <div id="main">
            <div class="post">

    <header class="post-header">
        <h1 class="post-title">AngularJS: If you don't have a dot, you're doing it wrong!</h1>

        <p class="post-meta">May 31, 2013 • zcourts
            
        <div class="share-post-header">
            <span class='st_reddit_large' displayText='Reddit'></span>
            <span class='st_facebook_large' displayText='Facebook'></span>
            <span class='st_twitter_large' displayText='Tweet'></span>
            <span class='st_linkedin_large' displayText='LinkedIn'></span>
            <span class='st_pinterest_large' displayText='Pinterest'></span>
            <span class='st_tumblr_large' displayText='Tumblr'></span>
            <span class='st_wordpress_large' displayText='WordPress'></span>
            <span class='st_googleplus_large' displayText='Google +'></span>
            <span class='st_yammer_large' displayText='Yammer'></span>
            <span class='st_blogger_large' displayText='Blogger'></span>
            <span class='st_email_large' displayText='Email'></span>
        </div>
        </p>
    </header>

    <article class="post-content">
        <p>This has bitten me twice in the last 3 days so I&#39;m doing a quick post to remind myself.</p>

<p>With AngularJS models, you typically have two way bindings between UI elements and your controller&#39;s properties. Directly from the <a href="http://docs.angularjs.org/api/ng.directive:input.text">docs</a> (<a href="http://plnkr.co/edit/PCUFA3yARnIdpks84W4Z">Plunker</a>)</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">
<span class="o">&lt;!</span><span class="nx">doctype</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">app</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"http://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span> <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"script.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="sr">/head</span><span class="err">&gt;
</span> <span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nx">form</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"myForm"</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">controller</span><span class="o">=</span><span class="s2">"Ctrl"</span><span class="o">&gt;</span>
 <span class="nx">Single</span> <span class="nx">word</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"input"</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">"text"</span>
 <span class="nx">ng</span><span class="o">-</span><span class="nx">pattern</span><span class="o">=</span><span class="s2">"word"</span> <span class="nx">required</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="nx">span</span> <span class="kr">class</span><span class="o">=</span><span class="s2">"error"</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">show</span><span class="o">=</span><span class="s2">"myForm.input.$error.required"</span><span class="o">&gt;</span>
 <span class="nx">Required</span><span class="o">!&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span> <span class="o">&lt;</span><span class="nx">span</span> <span class="kr">class</span><span class="o">=</span><span class="s2">"error"</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">show</span><span class="o">=</span><span class="s2">"myForm.input.$error.pattern"</span><span class="o">&gt;</span>
 <span class="nx">Single</span> <span class="nx">word</span> <span class="nx">only</span><span class="o">!&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">tt</span><span class="o">&gt;</span><span class="nx">text</span> <span class="o">=</span> <span class="o">&lt;</span><span class="sr">/tt&gt;&lt;br/</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="nx">tt</span><span class="o">&gt;</span><span class="nx">myForm</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">$valid</span> <span class="o">=</span> <span class="o">&lt;</span><span class="sr">/tt&gt;&lt;br/</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="nx">tt</span><span class="o">&gt;</span><span class="nx">myForm</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">$error</span> <span class="o">=</span> <span class="o">&lt;</span><span class="sr">/tt&gt;&lt;br/</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="nx">tt</span><span class="o">&gt;</span><span class="nx">myForm</span><span class="p">.</span><span class="nx">$valid</span> <span class="o">=</span> <span class="o">&lt;</span><span class="sr">/tt&gt;&lt;br/</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="nx">tt</span><span class="o">&gt;</span><span class="nx">myForm</span><span class="p">.</span><span class="nx">$error</span><span class="p">.</span><span class="nx">required</span> <span class="o">=</span> <span class="o">&lt;</span><span class="sr">/tt&gt;&lt;br/</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span> <span class="o">&lt;</span><span class="sr">/body</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/html</span><span class="err">&gt;
</span>
</code></pre></div>
<p>&lt;!-- more --&gt;JavaScript</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">
<span class="kd">function</span> <span class="nx">Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
 <span class="nx">$scope</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s1">'guest'</span><span class="p">;</span>
 <span class="nx">$scope</span><span class="p">.</span><span class="nx">word</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">\w</span><span class="sr">*$/</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div>
<p>This all works great until you get a simple property that&#39;s a &#39;primitive&#39; so numbers, boolean etc. and you need to use this property within an angular repeater or another directive which creates its own scope. The problem is that, because JavaScript is a pass by value language, primitive types are copied within nested scopes. This means that, if a property changes within a local scope, the original/parent version of the property isn&#39;t updated with those changes. Not only that, angular (for good reason) no longer allow duplicates within a repeater, which is what lead me to <a href="http://stackoverflow.com/a/15975118/400048">StackOverflow</a> the first time I encountered this.</p>

<p>The solution is simply replace the primitive with a JavaScript hash/object so instead of doing something like this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">
<span class="kd">function</span> <span class="nx">Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">myProperty</span> <span class="o">=</span><span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div>
<p>You should do</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">
<span class="kd">function</span> <span class="nx">Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">myProperty</span> <span class="o">=</span><span class="p">{</span><span class="na">someName</span><span class="p">:</span><span class="kc">true</span><span class="p">};</span>
<span class="p">}</span>

</code></pre></div>
<p>I highly recommend watching this talk by <a href="http://www.youtube.com/watch?v=ZhfUv0spHCY">Miško Hevery</a> on AngularJS best practices. I&#39;ve watched it...not I just need to remember all of it :D</p>

<p>[youtube=<a href="http://www.youtube.com/watch?v=ZhfUv0spHCY">http://www.youtube.com/watch?v=ZhfUv0spHCY</a>]</p>

<p>For further reading, Jim Hoskins did a more in depth write up on <a href="http://jimhoskins.com/2012/12/14/nested-scopes-in-angularjs.html">nested scopes in AngularJS</a>.</p>

    </article>
    <footer class="post-footer">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'zcourts'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
    </footer>
</div>

        </div>
        <!-- Footer -->
<div id="footer">
    <div class="share-footer">
        <span class='st_reddit_large' displayText='Reddit'></span>
        <span class='st_facebook_large' displayText='Facebook'></span>
        <span class='st_twitter_large' displayText='Tweet'></span>
        <span class='st_linkedin_large' displayText='LinkedIn'></span>
        <span class='st_pinterest_large' displayText='Pinterest'></span>
        <span class='st_tumblr_large' displayText='Tumblr'></span>
        <span class='st_wordpress_large' displayText='WordPress'></span>
        <span class='st_googleplus_large' displayText='Google +'></span>
        <span class='st_yammer_large' displayText='Yammer'></span>
        <span class='st_blogger_large' displayText='Blogger'></span>
        <span class='st_email_large' displayText='Email'></span>
    </div>
    <!-- Copyright -->
    <ul class="copyright">
        <li><a href="http://zcourts.com">&copy; zcourts</a></li>
        <li>i.e. &copy; Courtney Robinson. All rights reserved.</li>
    </ul>

</div>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-46289473-4', 'auto');
            ga('require', 'linkid', 'linkid.js');
            ga('send', 'pageview');
        </script>
        <script type="text/javascript">var switchTo5x=true;</script>
        <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
        <script type="text/javascript">stLight.options({publisher: "dd681bd6-1a3c-43f3-b378-df71c4cef728", doNotHash: false, doNotCopy: false, hashAddressBar: true});</script>
    </body>
</html>
