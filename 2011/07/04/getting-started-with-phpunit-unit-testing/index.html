<!DOCTYPE html>
<html>
        <head>
    <title>Getting started with PHPUnit unit testing</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="The follow up to my previous post. The below is the php unit test class for the string class example I wrote.">
    <meta name="keywords" content="" />
    <script src="/js/jquery.min.js"></script>
    <script src="/js/init.js"></script>

    <link rel="stylesheet" href="/css/main.css">

    <link rel="canonical" href="//2011/07/04/getting-started-with-phpunit-unit-testing">
    <link rel="alternate" type="application/atom+xml" title="zcourts AKA Courtney Robinson" href="/feed.xml" />
</head>
    <body>
        <!-- Header -->
<div id="header" class="skel-layers-fixed">

    <div class="top">

        <!-- Logo -->
        <div id="logo">
            <span class="image avatar48"><img src="/images/avatar.jpg" alt=""/></span>

            <h1 id="title">zcourts</h1>
            <p>Courtney Robinson</p>
            <p>Software Engineer</p>
            <p>PhD Student</p>
        </div>

        <!-- Nav -->
        <nav id="nav">
            <!--

                Prologue's nav expects links in one of two formats:

                1. Hash link (scrolls to a different section within the page)

                   <li><a href="#foobar" id="foobar-link" class="icon fa-whatever-icon-you-want skel-layers-ignoreHref"><span class="label">Foobar</span></a></li>

                2. Standard link (sends the user to another page/site)

                   <li><a href="http://foobar.tld" id="foobar-link" class="icon fa-whatever-icon-you-want"><span class="label">Foobar</span></a></li>

            -->
            <ul>
                <li><a href="/#top" id="top-link" class="skel-layers-ignoreHref"><span class="icon fa-home">Home</span></a></li>
                <li><a href="/#portfolio" id="portfolio-link" class="skel-layers-ignoreHref"><span class="icon fa-th">Projects</span></a></li>
                <li><a href="/posts" id="blog-link" class="skel-layers-ignoreHref"><span class=" glyphicon glyphicon-comment">Blog posts</span></a></li>
                <li><a href="/categories.html" id="cat-link" class="skel-layers-ignoreHref"><span class=" glyphicon glyphicon-tags">Categories</span></a></li>
                <li><a href="/about-courtney-robinson" id="about-link" class="skel-layers-ignoreHref"><span class="icon fa-user">About Me</span></a></li>
                <li><a href="/#contact" id="contact-link" class="skel-layers-ignoreHref"><span class="icon fa-envelope">Contact</span></a></li>
            </ul>
        </nav>

    </div>

    <div class="bottom">

        <!-- Social Icons -->
        <ul class="icons">
            <li><a href="https://twitter.com/zcourts" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
            <li><a href="https://www.facebook.com/zcourts" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
            <li><a href="https://github.com/zcourts" class="icon fa-github"><span class="label">Github</span></a></li>
            <li><a href="mailto:site@crlog.info" class="icon fa-envelope"><span class="label">Email</span></a></li>
        </ul>

    </div>

</div>
        <!-- Main -->
        <div id="main">
            <div class="post">

    <header class="post-header">
        <h1 class="post-title">Getting started with PHPUnit unit testing</h1>

        <p class="post-meta">Jul 4, 2011 â€¢ zcourts
            </p>
    </header>

    <article class="post-content">
        <p>The follow up to my<a href="http://crlog.info/2011/07/02/creating-a-string-class-to-represent-and-manipulate-strings-in-php/"> previous post</a>. The below is the php unit test class for the string class example I wrote.</p>

<!-- more -->
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="c">&lt;!--?php require_once dirname(__FILE__) . '/../string.php'; /**  * Test class for String.  * Generated by PHPUnit on 2011-07-02 at 13:20:19.  */ class StringTest extends PHPUnit_Framework_TestCase {     /**      * @var String      */     protected $object;     /**      * Sets up the fixture, for example, opens a network connection.      * This method is called before a test is executed.      */     protected function setUp() {         $this---&gt;</span>object = new String("test");
    }

    /**
     * Must return null if the index is smaller than 0
     */
    public function testCharAtSmallIndex() {
        $this-&gt;assertNull($this-&gt;object-&gt;charAt(-1));
    }

    /**
     * Must return null if the index is bigger than the size of the string
     */
    public function testCharAtBigIndex() {
        $this-&gt;assertNull($this-&gt;object-&gt;charAt(5));
    }

    /**
     * Must return character at the said index
     */
    public function testCharAt() {
        $this-&gt;assertEquals('s', $this-&gt;object-&gt;charAt(2));
    }

    public function testToString() {
        $this-&gt;assertEquals('test', $this-&gt;object-&gt;toString());
    }

    public function testSize() {
        $this-&gt;assertEquals(4, $this-&gt;object-&gt;size());
    }

    /**
     * should return null if is an object and not an isnance of String
     */
    public function testCompareToIsObjectInstanceOf() {
        $this-&gt;assertNull($this-&gt;object-&gt;compareTo(new stdClass()));
    }

    /**
     * should return greater than 0 since "test" is greater than "me"
     */
    public function testCompareToIsObjectNOTInstanceOf() {
        $this-&gt;assertGreaterThan(0, $this-&gt;object-&gt;compareTo(new String("me")));
    }

//<span class="nt">&lt; 0</span> <span class="na">if</span> <span class="na">str1</span> <span class="na">is</span> <span class="na">less</span> <span class="na">than</span> <span class="na">str2</span><span class="err">;</span> <span class="nt">&gt;</span> 0 if str1 is greater than str2, and 0 if they are equal.
    public function testCompareToGreaterThan() {
        //if first assertion passes then compareto should return val &gt;0
        $this-&gt;assertEquals(4, $this-&gt;object-&gt;size());
        $this-&gt;assertGreaterThan(0, $this-&gt;object-&gt;compareTo("was"));
    }

    public function testCompareToLessThan() {
        $this-&gt;assertLessThan(0, $this-&gt;object-&gt;compareTo("testing"));
    }

    public function testCompareToEquals() {
        $this-&gt;assertEquals(0, $this-&gt;object-&gt;compareTo("test"));
    }

    public function testCompareToEqualsBadChars() {
        $this-&gt;assertNotEquals(0, $this-&gt;object-&gt;compareTo("etst"));
    }

    //return -2 because of case mismatch
    public function testCompareToEqualsCaseSensitive() {
        $this-&gt;assertEquals(-2, $this-&gt;object-&gt;compareTo("Test"));
    }

    public function testCompareToEqualsCaseInSensitive() {

        $this-&gt;assertEquals(0, $this-&gt;object-&gt;compareTo("test"));
    }

    public function testCompareToGreaterThanCaseInSensitive() {
        $this-&gt;assertGreaterThan(0, $this-&gt;object-&gt;compareTo("was", false));
    }

    public function testCompareToLessThanCaseInSensitive() {
        $this-&gt;assertLessThan(0, $this-&gt;object-&gt;compareTo("testing", false));
    }

}
</code></pre></div>
<p>I suppose the essence of this is to try to hammer out bugs as early as possible. PHPUnit, like JUnit and other unit testing frameworks provides the infrastructure you may need to create test cases quickly and easily.
By using assertions you tests for various possibilities and try to provide data that should break the code... I&#39;ve read a few places where people suggest providing data that you expect a certain result for. Those sound like opposite things but they&#39;re in fact the same.
They&#39;re the same because if you provide data to break the program you then write assertions to check that the program responds with an error or something other than what should happen, an exception perhaps? If you then provide data that you know should get you the right result you go off to write assertions to check that the correct response is in fact returned... Either way what matters is the assertions you make.</p>

<p>Just my 2 cents but I think providing data to break everything will make for better results...or event better do it both ways.</p>

<p>The unit tests done on the compareTo method is fairly extensive and checks for every case i could think of at the time. For a set of available assertions in phpunit see <a href="http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html">http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html</a></p>

<p>all those tests should pass, if one fails check out the error and try to see why, play around with the expected values, i.e the first parameter in the assertion method calls.</p>

<p>Just found a very good quote:
<table cellpadding="0" width="100%" cellspacing="0" border="0" summary="Block quote" >
<tbody >
<tr ></p>

<p><td width="10%" valign="top" >
</td></p>

<p><td width="80%" valign="top" >You can always write more tests. However, you will quickly find that only a fraction of the tests you can imagine are actually useful. What you want is to write tests that fail even though you think they should work, or tests that succeed even though you think they should fail. Another way to think of it is in cost/benefit terms. You want to write tests that will pay you back with information.
</td></p>

<p><td width="10%" valign="top" >
</td>
</tr>
<tr ></p>

<p><td width="10%" valign="top" >
</td></p>

<p><td colspan="2" align="right" valign="top" >--Erich Gamma
</td>
</tr>
</tbody>
</table></p>

    </article>
    <footer class="post-footer">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'zcourts'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
    </footer>
</div>

        </div>
        <!-- Footer -->
<div id="footer">
    <!-- Copyright -->
    <ul class="copyright">
        <li><a href="http://zcourts.com">&copy; zcourts</a></li>
        <li>i.e. &copy; Courtney Robinson. All rights reserved.</li>
    </ul>

</div>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-46289473-4', 'auto');
            ga('require', 'linkid', 'linkid.js');
            ga('send', 'pageview');

        </script>
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=zcourts" async="async"></script>
    </body>
</html>
